{"creationTimeStamp":"2025-01-09T12:52:46.744Z","modifiedTimeStamp":"2025-01-13T12:17:53.074Z","createdBy":"ssfahe","modifiedBy":"ssfahe","name":"Run Model Local.step","displayName":"Run Model Local.step","localDisplayName":"Run Model Local.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","uri":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","uri":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","uri":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","uri":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52/copy","uri":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","uri":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","uri":"/dataFlows/steps/78d45309-8ded-4664-adca-7e6844bc2d52","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inputtable1","displayName":"inputtable1","localDisplayName":"inputtable1","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"inputtable2","displayName":"inputtable2","localDisplayName":"inputtable2","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"output_table","displayName":"output_table","localDisplayName":"output_table","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table","supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"page1\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Inputs\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable1\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input data to score\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable2\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Model table\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"textarea1\",\n\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\"label\": \"Name of the model in the Model table\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"page3\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"numstepper1\",\n\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\"label\": \"Lifetime in seconds for output table (max 100k seconds)\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"integer\": true,\n\t\t\t\t\t\"min\": null,\n\t\t\t\t\t\"max\": 100000,\n\t\t\t\t\t\"stepsize\": 1\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"page2\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Outputs\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"output_table\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Output table\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"page4\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Run Model Local.step\\n\\n================================\\n\\nThis custom step enables easy usage of runModelLocal action which is is part of the Model Publishing and Scoring Action Set. \\n\\nThe step requires two input tables.\\n1. A table that contains the input data that will be scored with the published model\\n2. Model table where the model is published. Models can be published to the CAS publishing destination via e.g. Model Manager. \\n\\nThe name of the published model is required in the input tab. Please make sure to note the name of your model when publishing it. It can be also found in the Model table once published. \\n\\nIn the options, it is possible to set a lifetime for the output table in seconds.\\n\\n=================================\\n\\nVersion 1.0 (developed on Viya 2024.12)\\nCreated by Antti Heino (antti.heino@sas.com)\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"inputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"inputtable2\": {\n\t\t\t\"library\": \"PUBLIC\",\n\t\t\t\"table\": \"CASPUBLISHEDMODELS\"\n\t\t},\n\t\t\"textarea1\": \"\",\n\t\t\"numstepper1\": 0,\n\t\t\"output_table\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t}\n}","templates":{"SAS":"/* runModelLocal action code */\n/* Score input data using a model published to CAS publishing destination */\n/* sysfunc(tranwrd(str())) is used to add quotes around the table and caslib names as the macro variables from custom step UI do not contain them */\nproc cas; \n   loadactionset \"modelPublishing\";\n   runModelLocal  /                                    \n      inTable={name=\"%sysfunc(tranwrd(&inputtable1_name,%str( ),%str(\" \")))\",caslib=\"%sysfunc(tranwrd(&inputtable1_lib,%str( ),%str(\" \")))\"},\n\t  modelName=\"%sysfunc(tranwrd(&textarea1,%str( ),%str(\" \")))\",\n      modelTable={name=\"%sysfunc(tranwrd(&inputtable2_name,%str( ),%str(\" \")))\",caslib=\"%sysfunc(tranwrd(&inputtable2_lib,%str( ),%str(\" \")))\"},\n\t  outTable={name=\"%sysfunc(tranwrd(&output_table_name,%str( ),%str(\" \")))\", caslib=\"%sysfunc(tranwrd(&output_table_lib,%str( ),%str(\" \")))\", lifetime=&numstepper1}\n;\nrun;\nquit;"}}